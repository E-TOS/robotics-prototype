<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>SC Robotics GUI - Rover</title>
    <link rel="shortcut icon" href="static/img/sclogo_header_black.ico">

    <!-- Bootstrap CSS -->
    <link href="../static/css/bootstrap-4.1.2.min.css" rel="stylesheet">
    <link href="../static/css/font-awesome-4.7.0.min.css" rel="stylesheet">
    <link href="../static/css/titatoggle-dist.css" rel="stylesheet">
    <link href="../static/css/app.css" rel="stylesheet">
    <link href="../static/css/rover.css" rel="stylesheet">
    <script src="../static/js/jquery-3.3.1.min.js"></script>
    <script src="../static/js/helpers.js"></script>

    <!-- for roslibjs stuff -->
    <script type="text/javascript" src="../static/js/roslibjs/roslib.min.js"></script>
    <script type="text/javascript" src="../static/js/roslibjs/eventemitter2.min.js"></script>
    <!-- all for ros3d -->
    <script type="text/javascript" src="../static/js/roslibjs/three.js"></script>
    <script type="text/javascript" src="../static/js/roslibjs/ColladaLoader.js"></script>
    <script type="text/javascript" src="../static/js/roslibjs/ColladaLoader2.min.js"></script>
    <script type="text/javascript" src="../static/js/roslibjs/STLLoader.js"></script>
    <script type="text/javascript" src="../static/js/roslibjs/ros3d.min.js"></script>
    <!-- homemade -->
    <script type="text/javascript" src="../static/js/roslibjs/ros-helpers.js"></script>
    <script src="../static/js/app.js"></script>
    <script src="../static/js/rover.js"></script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous" async></script> -->
    <script src="../static/js/popper-1.14.3.min.js"></script>
    <script src="../static/js/bootstrap-4.1.2.min.js"></script>
    <!-- Bootstrap Toggle Buttons -->
    <link href="../static/css/bootstrap-toggle-2.2.2.min.css" rel="stylesheet">
    <script src="../static/css/bootstrap-toggle-2.2.2.min.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top" style="margin-bottom: 120px">
        <a class="navbar-brand" href=""javascript:void(0)"">
            <img src="../static/img/sclogo_header.png">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="dropdown col-md-2">
          <button id="mux" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
            Select Device Channel
          </button>
          <div class="dropdown-menu">
            <a id="mux-0" class="dropdown-item">0: Rover</a>
            <a id="mux-1" class="dropdown-item">1: Arm</a>
            <a id="mux-2" class="dropdown-item">2: Science</a>
            <a id="mux-3" class="dropdown-item">3: PDS</a>
          </div>
        </div>

        <div class="dropdown col-md-2">
          <button id="serial-type" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
            Serial Type
          </button>
          <div class="dropdown-menu">
            <a id="uart" class="dropdown-item">uart</a>
            <a id="usb" class="dropdown-item">usb</a>
          </div>
        </div>
        </li>
      </ul>
    </div>
    <div class="col-md-4">
      <div class="row" style="color:white">
        <div class="col-md-5">BATTERY VOLTAGE: </div>
        <div class="col-md-1" id="battery-voltage">-</div>
      </div>
    </div>
  </nav>
  <br>
  <br>
  <div style="margin-bottom:10px"></div>

  <div class="container fill">
    <div class="row"> <!-- motor table, map, camera -->
      <div class="col-md-3"> <!-- rover wheel speeds -->
        <div class="row">
          <h5 class="container-header">Motor Table</h5>
          <!--Table-->
          <table id="motor-table" class="table table-hover table-sm table-bordered" style="font-size:12px; background:rgba(255, 255, 255, 0.8); text-align: left">
            <!--Table head-->
            <thead>
              <tr>
                <th scope="col">Motor</br>(Number)</th>
                <th scope="col">Status</br>(Alive/Dead)</th>
                <th scope="col">Speed</br>(RPM)</th>
                <th scope="col">Current</br>(A)</th>
              </tr>
            </thead>
            <!--Table body-->
            <tbody>
              <tr>
                <th scope="row"><button type="button" class="btn btn-success btn-circle"><i class="fa"></i></button>
                  R Front
                </th>
                <td id="right-front-status">N/A</td>
                <td id="right-front-rpm">-</td>
                <td id="right-front-current">N/A</td>
              </tr>
              <tr>
                <th scope="row"><button type="button" class="btn btn-success btn-circle"><i class="fa"></i></button>
                  R Mid
                </th>
                <td id="right-mid-status">N/A</td>
                <td id="right-mid-rpm">-</td>
                <td id="right-mid-current">N</t/Ad>
              </tr>
              <tr>
                <th scope="row"><button type="button" class="btn btn-success btn-circle"><i class="fa"></i></button>
                  R Back
                </th>
                <td id="right-rear-status">N/A</td>
                <td id="right-rear-rpm">-</td>
                <td id="right-rear-current">N/A</td>
              </tr>
              <tr>
                <th scope="row"><button type="button" class="btn btn-success btn-circle"><i class="fa"></i></button>
                  L Front
                </th>
                <td id="left-front-status">N/A</td>
                <td id="left-front-rpm">-</td>
                <td id="left-front-current">N/A</td>
              </tr>
              <tr>
                <th scope="row"><button type="button" class="btn btn-success btn-circle"><i class="fa"></i></button>
                  L Mid
                </th>
                <td id="left-mid-status">N/A</td>
                <td id="left-mid-rpm">-</td>
                <td id="left-mid-current">N/A</td>
              </tr>
              <tr>
                <th scope="row"><button type="button" class="btn btn-success btn-circle"><i class="fa"></i></button>
                  R Back
                </th>
                <td id="left-rear-status">N/A</td>
                <td id="left-rear-rpm">-</td>
                <td id="left-rear-current">N/A</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-md-4"> <!-- GPS Map -->
        <h5 class="container-header">GPS Map</h5>
        <div class="imageWrapper">
          <img class="overlayImage" src="../static/images/gps_map.jpg" class="mx-auto d-block" id="arm-position"/>
          <span class="overlayGpsDot" style="top:50px; left:100px; background-color:blue">Rover</span>
          <span class="overlayGpsDot" style="top:70px; left:20px; background-color:red">Antenna</span>
          <span class="overlayGpsDot" style="top:150px; left:300px;">Goal</span>
          <!-- doesn't work but would be cool to have this and be able to place it easily
          <div class="spinner-grow" role="status">
            <span class="sr-only">Rover Location</span>
          </div>
          -->
        </div>
      </div>
      <div class="col-md-5"> <!-- Camera Feed -->
            <h5 class="container-header">Camera</h5>
            <!-- It would be preferable to use video tag, but mjpeg streams are not have no general support beyond img tags -->
            <!-- <img src="../static/images/stream-offline.jpg" class="rotateimg180"/> -->
            <img id="camera-feed" src="http://{{ roverIP }}:8080/stream?topic=/cv_camera/image_raw" class="mx-auto d-block" alt="Arm Camera Stream Offline" onerror="this.onerror=null;this.src='../static/images/stream-offline.jpg';"/>
            <!--<img src="http://localhost:8080/stream?topic=/cv_camera/image_raw" class="mx-auto d-block" alt="Arm Camera Stream Offline" onerror="this.onerror=null;this.src='../static/images/stream-offline.jpg';"/>-->
        </div>
    </div>
    <div class="row"> <!-- navigation, rover controls, camera+extra controls, log -->
      <!-- NAVIGATION -->
      <div class="col-md-3">
        <h5>Navigation Data</h5>
        <div style="display: block" id="rover-unchanging">
          <h6>Rover coords:</h6>
          <h5>lat: <span id="rover-latitude">-</span></h5>
          <h5>long: <span id="rover-longitude">-</span></h5>
          <h5>heading: <span id="rover-heading">-</span></h5>
        </div>
        <div style="display: block" id="antenna-inputs" class="input-group input-group-sm">
          <div class="input-group-prepend">
            <span class="input-group-text">lat, long, bearing (Antenna)</span><br>
          </div>
          <input type="text" id="antenna-latitude-input">
          <input type="text" id="antenna-longitude-input">
          <input type="text" id="antenna-start-dir-input">
          <br>
          <button type="button" id="send-antenna-data-btn" class="btn btn-primary">Send antenna data</button>
        </div>
        <div style="display: none" id="antenna-unchanging">
          <h6>Antenna coords:</h6>
          <h5>lat: <span id="antenna-latitude">-</span></h5>
          <h5>long: <span id="antenna-longitude">-</span></h5>
          <h5>bearing: <span id="antenna-start-dir">-</span></h5>
          <div>
            <h6>Direct antenna to:</h6>
            <h5>angle: <span id="recommended-antenna-angle">-</span></h3>
            <h5>dist (m): <span id="distance-to-rover">-</span></h3>
            <!-- <br> -->
            <button type="button" id="change-antenna-data-btn" class="btn btn-primary">Change antenna data</button>
          </div>
        </div>
        <div style="display: block" id="goal-inputs" class="input-group input-group-sm">
          <div class="input-group-prepend">
            <span class="input-group-text">lat, long (Destination)</span><br>
          </div>
          <input type="text" id="goal-latitude-input">
          <input type="text" id="goal-longitude-input">
          <br>
          <button type="button" id="send-goal-pos-btn" class="btn btn-primary">Send</button>
        </div>
        <div style="display: none" id="goal-unchanging">
          <h6>Destination coords:</h6>
          <h5>lat: <span id="goal-latitude">-</span></h5>
          <h5>long: <span id="goal-longitude">-</span></h5>
          <div>
            <h6>Direct rover to:</h6>
            <h5>dir: <span id="recommended-rover-heading">-</span></h5>
            <h5>dist (m): <span id="distance-to-goal">-</span></h5>
            <!-- <br> -->
            <button type="button" id="change-goal-pos-btn" class="btn btn-primary">Change goal coords</button>
          </div>
        </div>
      </div>
      <!-- ROVER CONTROLS -->
      <div class="col-md-3" align="center">
        <div class="row">
          <div class="col-sm-12" style="text-align: center">
            <h5 class="container-header">Motor Controls</h5>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-5">Activate Rover</div>
          <div class="col-sm-5">Command Listener</div>
        </div>
        <div class="row">
          <div class="col-sm-5" align="center" style="border-style:none;">
              <div class="form-check checkbox-slider--a checkbox-slider-md" align="center">
                  <label>
                      <input id="activate-rover-btn" type="checkbox">
                      <span> </span>
                  </label>
              </div>
          </div>
          <div class="col-sm-5" align="center" style="border-style:none;">
              <div class="form-check checkbox-slider--a checkbox-slider-md" align="center">
                  <label>
                      <input id="toggle-rover-listener-btn" type="checkbox">
                      <span> </span>
                  </label>
              </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-3"></div>
          <div class="col-md-3">
            <a id="rover-up">
              <button type="button" class="control-btn4 fa fa-chevron-up fa-1x"></button>
            </a>
          </div>
          <div class="col-md-3"></div>
        </div>
        <div class="row">
          <div class="col-md-3">
            <a id="rover-left">
              <button type="button" class="control-btn4 fa fa-chevron-left fa-1x"></button>
            </a>
          </div>
          <div class="col-md-3">
            <a id="rover-down">
              <button type="button" class="control-btn4 fa fa-chevron-down fa-1x"></button>
            </a>
          </div>
          <div class="col-md-3">
            <a id="rover-right">
              <button type="button" class="control-btn4 fa fa-chevron-right fa-1x"></button>
            </a>
          </div>
        </div>
        <div class="row">
          <div class="col-md-2">Throttle: </div>
          <div class="col-md-3" id="throttle-speed">-</div>
          <div class="col-md-2">Steering: </div>
          <div class="col-md-3" id="steering-speed">-</div>
        </div>

        <div class="row">
          <div class="col-md-8">Max Throttle: </div>
          <div class="col-md-2" id="max-throttle-speed">25</div>
        </div>
        <div class="row">
          <div class="col-md-4">U</div>
          <div class="col-md-4">I</div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <a id="max-throttle-decrease">
                <button type="button" class="control-btn4 fa fa-chevron-down fa-1x"></button>
            </a>
          </div>
          <div class="col-md-4">
            <a id="max-throttle-increase">
                <button type="button" class="control-btn4 fa fa-chevron-up fa-1x"></button>
            </a>
          </div>
        </div>

        <div class="row">
          <div class="col-md-8">Max Steering: </div>
          <div class="col-md-2" id="max-steering-speed">39</div>
        </div>
        <div class="row">
          <div class="col-md-4">J</div>
          <div class="col-md-4">K</div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <a id="max-steering-decrease">
                <button type="button" class="control-btn4 fa fa-chevron-down fa-1x"></button>
            </a>
          </div>
          <div class="col-md-4">
            <a id="max-steering-increase">
                <button type="button" class="control-btn4 fa fa-chevron-up fa-1x"></button>
            </a>
          </div>
        </div>
      </div>
      <!-- CAMERA CONTROLS -->
      <div class="col-md-3" align="center">
        <div class="row">
          <div class="col-sm-12" style="text-align: center">
            <h5 class="container-header">Camera Controls</h5>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">Front Camera</div>
          <div class="col-sm-4">Rear Camera</div>
          <div class="col-sm-4">Arm/Science Camera</div>
        </div>
        <div class="row">
          <div class="col-sm-4" align="center" style="border-style:none;">
              <div class="form-check checkbox-slider--a checkbox-slider-md" align="center">
                  <label>
                      <input id="front-camera-stream-btn" type="checkbox">
                      <span> </span>
                  </label>
              </div>
          </div>
          <div class="col-sm-4" align="center" style="border-style:none;">
              <div class="form-check checkbox-slider--a checkbox-slider-md" align="center">
                  <label>
                      <input id="rear-camera-stream-btn" type="checkbox">
                      <span> </span>
                  </label>
              </div>
          </div>
          <div class="col-sm-4" align="center" style="border-style:none;">
              <div class="form-check checkbox-slider--a checkbox-slider-md" align="center">
                  <label>
                      <input id="arm-science-camera-stream-btn" type="checkbox">
                      <span> </span>
                  </label>
              </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md">
            <h5 class="container-header">Camera Tilt/Pan</h5>
          </div>
        </div>
        <div class="row">
          <table align="center">
          <tr>
            <td><strong>Front</strong></td>
            <td>
              <a id="camera-front-tilt-up-btn">
                <button type="button" class="control-btn2">
                  &#8593;Tilt
                </button>
              </a>
            </td>
            <td>
              <span class="col-md-3" id="front-tilt-pwm">-</span>
            </td>
            <td>
              <span class="col-md-3" id="front-pan-pwm">-</span>
            </td>
            <!--<td>
                <input id="servo-val" type="text" size="4"/>
            </td>-->
          </tr>
          <tr>
              <td>
                <a id="camera-front-lpan-btn">
                  <button type="button" class="control-btn2">
                    LPan
                  </button>
                </a>
              </td>
              <td>
                <a id="camera-front-tilt-down-btn">
                  <button type="button" class="control-btn2">
                    &#8595;Tilt
                  </button>
                </a>
              </td>
              <td>
                <a id="camera-front-rpan-btn">
                  <button type="button" class="control-btn2">
                    RPan
                  </button>
                </a>
              </td>
              <td>
                <a id="camera-front-home-btn">
                  <button type="button" class="control-btn2">
                    Home
                  </button>
                </a>
              </td>
          </tr>
          </table>
        </div>
        <div class="row">
          <table align="center">
          <tr>
            <td><strong>Back</strong></td>
            <td>
              <a id="camera-back-tilt-up-btn">
                <button type="button" class="control-btn2">
                  &#8593;Tilt
                </button>
              </a>
            </td>
            <td>
              <span class="col-md-3" id="back-tilt-pwm">-</span>
            </td>
            <td>
              <span class="col-md-3" id="back-pan-pwm">-</span>
            </td>
            <!--<td>
                <input id="servo-val" type="text" size="4"/>
            </td>-->
          </tr>
          <tr>
              <td>
                <a id="camera-back-lpan-btn">
                  <button type="button" class="control-btn2">
                    LPan
                  </button>
                </a>
              </td>
              <td>
                <a id="camera-back-tilt-down-btn">
                  <button type="button" class="control-btn2">
                    &#8595;Tilt
                  </button>
                </a>
              </td>
              <td>
                <a id="camera-back-rpan-btn">
                  <button type="button" class="control-btn2">
                    RPan
                  </button>
                </a>
              </td>
              <td>
                <a id="camera-back-home-btn">
                  <button type="button" class="control-btn2">
                    Home
                  </button>
                </a>
              </td>
          </tr>
          </table>
        </div>
        <!-- EXTRA CONTROLS -->
        <div class="row">
          <div class="col-sm-12" style="text-align: center">
            <h5 class="container-header">EXTRA CONTROLS</h5>
          </div>
        </div>
        <div class="row">
          <table>
            <tr>
              <td>
                <button title="List all commands" id="list-all-rover-cmds" type="button" class="control-btn-mid" disabled>
                  <strong>L</strong>
                </button>
              </td>
              <td>
                <div class="col-sm" align="center" style="vertical-align:middle; border-style:none">
                    <button type="button" id="reboot-button" class="btn btn-primary btn-lg fa fa-retweet fa-lg" aria-hidden="true" style="padding: 16px 10px 16px 10px;margin-top:12px">
                        <span style="font-family:'Helvetica Neue', Arial, sans-serif;"> Reboot MCU</span>
                    </button>
                </div>
              </td>
              <td>
                <button title="Stop motors" id="stop-motors-btn" type="button" class="control-btn-mid">
                  <strong>O</strong>
                </button>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <!-- LOG CONSOLE -->
      <div class="col-md-3">
        <div class="row">
          <h5 class="container-header">Log Console</h5>
          <div class="form-group">
            <textarea id="write-to-log" rows="8" readonly></textarea>
            <br>
            <!--log console buttons-->
            <div class="btn-group" role="group" id="logs-btn">
              <a id="click_btn">
                <button type="button" class="btn btn-secondary">Open Logs</button>
              </a>
              <a id="clear-log">
                <button type="button" class="btn btn-secondary" onclick="clearLogConsole()">Clear Logs</button>
              </a>
              <a id="test-log">
                <button type="button" class="btn btn-secondary" onclick="appendToConsole('Simple test.');">Test</button>
              </a>
            </div>
            <div class="btn-group" role="group">
              <button type="button" id="ping-odroid" class="btn btn-primary" aria-hidden="true">Ping Odroid</button>
              <button type="button" id="ping-rover-mcu" class="btn btn-primary" aria-hidden="true">Ping Rover MCU</button>
            </div>
          </div>
        </div>
      </div>
    </div> <!-- end of second row -->
  </div>

</body>

</html>
